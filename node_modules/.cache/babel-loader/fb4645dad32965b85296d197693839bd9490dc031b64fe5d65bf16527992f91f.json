{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fullcontainer w-full h-full bg-[#191717] flex items-center gap-1 justify-center\"\n};\nconst _hoisted_2 = {\n  class: \"w-[50vw] h-full bg-black flex items-center justify-center transition-all opacity-60 hover:opacity-80 flex-col bg-cover bg-no-repeat bg-center bg-[url(@/assets/netflixtv-2.jpg)]\"\n};\nconst _hoisted_3 = {\n  class: \"w-[40vw] h-[10vh] flex justify-center items-center\",\n  style: {\n    \"margin-top\": \"25vh\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"w-[50vw] h-full bg-black flex items-center transition-all justify-center opacity-60 hover:opacity-80 flex-col bg-cover bg-no-repeat bg-center bg-[url(@/assets/spotifytv.jpg)]\"\n};\nconst _hoisted_5 = {\n  class: \"w-[40vw] h-[10vh] flex justify-center items-center\",\n  style: {\n    \"margin-top\": \"25vh\"\n  }\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"absolute bottom-5 right-5 netflixfont\",\n  target: \"_blank\",\n  href: \"https://github.com/hsnnnnn\"\n}, \"Created by hsn361\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", {\n    class: \"netflixfont text-3xl cursor-pointer text-white hover:text-4xl transition-all\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.CallApi('netflix'))\n  }, \"GET MY STATISTICS\")])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"p\", {\n    class: \"netflixfont text-3xl cursor-pointer text-white hover:text-4xl transition-all\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.CallApi('spotify'))\n  }, \"GET MY STATISTICS\")])]), _hoisted_6]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","target","href","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","$event","$options","CallApi","_hoisted_4","_hoisted_5","_hoisted_6"],"sources":["C:\\Users\\Hasan\\Desktop\\website\\mywebsite\\src\\components\\MainPage.vue"],"sourcesContent":["<template>\n  <div class=\"fullcontainer w-full h-full bg-[#191717] flex items-center gap-1 justify-center\">\n    <div class=\"w-[50vw] h-full bg-black flex items-center justify-center transition-all opacity-60 hover:opacity-80 flex-col bg-cover bg-no-repeat bg-center bg-[url(@/assets/netflixtv-2.jpg)]\">\n      <div class=\"w-[40vw] h-[10vh] flex justify-center items-center\" style=\"margin-top: 25vh;\">\n        <p class=\"netflixfont text-3xl cursor-pointer text-white hover:text-4xl transition-all\" @click=\"CallApi('netflix')\">GET MY STATISTICS</p>\n      </div>\n    </div>\n    <div class=\"w-[50vw] h-full bg-black flex items-center transition-all justify-center opacity-60 hover:opacity-80 flex-col bg-cover bg-no-repeat bg-center bg-[url(@/assets/spotifytv.jpg)]\">\n      <div class=\"w-[40vw] h-[10vh] flex justify-center items-center\" style=\"margin-top: 25vh;\">\n        <p class=\"netflixfont text-3xl cursor-pointer text-white hover:text-4xl transition-all\" @click=\"CallApi('spotify')\">GET MY STATISTICS</p>\n      </div>\n    </div>\n    <a class=\"absolute bottom-5 right-5 netflixfont\" target=\"_blank\" href=\"https://github.com/hsnnnnn\">Created by hsn361</a>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'MainPage',\n  components: {},\n  data() {\n    return {\n      clientId: \"8ef5d1b0004849b48db5af3ea7259c49\",\n      code: null,\n    };\n  },\n  methods: {\n    async CallApi(app) {\n      if (app == 'spotify') {\n        this.redirectToAuthCodeFlow(this.clientId);\n      } else {\n        this.$router.push('/netflix');\n      }\n    },\n    async redirectToAuthCodeFlow(clientId) {\n      const verifier = this.generateCodeVerifier(128);\n      const challenge = await this.generateCodeChallenge(verifier);\n\n      localStorage.setItem(\"verifier\", verifier);\n\n      const params = new URLSearchParams();\n      params.append(\"client_id\", clientId);\n      params.append(\"response_type\", \"code\");\n      params.append(\"redirect_uri\", \"http://localhost:8080/\");\n      params.append(\"scope\", \"user-read-private user-read-email\");\n      params.append(\"code_challenge_method\", \"S256\");\n      params.append(\"code_challenge\", challenge);\n\n      document.location = `https://accounts.spotify.com/authorize?${params.toString()}`;\n    },\n    generateCodeVerifier(length) {\n      let text = '';\n      let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n      for (let i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      }\n      return text;\n    },\n    async generateCodeChallenge(codeVerifier) {\n      const data = new TextEncoder().encode(codeVerifier);\n      const digest = await window.crypto.subtle.digest('SHA-256', data);\n      return btoa(String.fromCharCode.apply(null, [...new Uint8Array(digest)]))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=+$/, '');\n    },\n    async getAccessToken(clientId, code) {\n      const verifier = localStorage.getItem(\"verifier\");\n\n      const params = new URLSearchParams();\n      params.append(\"client_id\", clientId);\n      params.append(\"grant_type\", \"authorization_code\");\n      params.append(\"code\", code);\n      params.append(\"redirect_uri\", \"http://localhost:5173/callback\");\n      params.append(\"code_verifier\", verifier);\n\n      const result = await fetch(\"https://accounts.spotify.com/api/token\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: params,\n      });\n\n      const { access_token } = await result.json();\n      return access_token;\n    },\n    async fetchProfile(token) {\n      const result = await fetch(\"https://api.spotify.com/v1/me\", {\n        method: \"GET\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      return await result.json();\n    },\n    populateUI(profile) {\n      console.log(profile.email);\n    },\n  },\n  async mounted() {\n    if (!this.code) {\n      this.redirectToAuthCodeFlow(this.clientId);\n    } else {\n      const accessToken = await this.getAccessToken(this.clientId, this.code);\n      const profile = await this.fetchProfile(accessToken);\n      this.populateUI(profile);\n    }\n  },\n};\n</script>\n\n<style scoped>\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAiF;;EACrFA,KAAK,EAAC;AAAkL;;EACtLA,KAAK,EAAC,oDAAoD;EAACC,KAAyB,EAAzB;IAAA;EAAA;;;EAI7DD,KAAK,EAAC;AAAgL;;EACpLA,KAAK,EAAC,oDAAoD;EAACC,KAAyB,EAAzB;IAAA;EAAA;;gCAIlEC,mBAAA,CAAwH;EAArHF,KAAK,EAAC,uCAAuC;EAACG,MAAM,EAAC,QAAQ;EAACC,IAAI,EAAC;GAA6B,mBAAiB;;;uBAXtHC,mBAAA,CAYM,OAZNC,UAYM,GAXJJ,mBAAA,CAIM,OAJNK,UAIM,GAHJL,mBAAA,CAEM,OAFNM,UAEM,GADJN,mBAAA,CAAyI;IAAtIF,KAAK,EAAC,8EAA8E;IAAES,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,OAAO;KAAa,mBAAiB,E,KAGzIX,mBAAA,CAIM,OAJNY,UAIM,GAHJZ,mBAAA,CAEM,OAFNa,UAEM,GADJb,mBAAA,CAAyI;IAAtIF,KAAK,EAAC,8EAA8E;IAAES,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,OAAO;KAAa,mBAAiB,E,KAGzIG,UAAwH,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}